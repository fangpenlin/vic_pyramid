from __future__ import unicode_literals

from .helper import ModelTestCase

import transaction


class TestPermissionModel(ModelTestCase):
        
    def make_one(self):
        from {{package}}.models.permission import PermissionModel
        return PermissionModel(self.session)
    
    def test_create_permission(self):
        model = self.make_one()
        
        permission_name = 'test'
        description = permission_name
        
        with transaction.manager:
            permission_id = model.create_permission(
                permission_name=permission_name,
                description=description,
            )
        permission = model.get_permission_by_id(permission_id)
        
        self.assertEqual(permission.permission_name, permission_name)
        self.assertEqual(permission.description, description)
